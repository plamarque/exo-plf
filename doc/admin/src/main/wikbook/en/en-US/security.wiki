eXo portal relies on Java standards (JAAS) for propagating the user identity and roles from the directory to the different applications deployed on the server.

h1. Where is it used
JAAS is mainly used to authenticate users to "eXo Portal" interface and to the JCR

h1. Where is it declared
h2. Kernel configuration files:
A new entry has been added in configuration.properties file named "exo.security.domain"
{code}
# Realm name
exo.security.domain=gatein-domain
{code}
This variable is declared in the configuration of the "PortalContainerConfig"
{code:xml}
  <component>
    <type>org.exoplatform.container.definition.PortalContainerConfig</type>
	...
      <!-- The name of the default security realm -->
      <value-param>
        <name>default.realm.name</name>
		<value>${exo.security.domain}</value> 
      </value-param>
	...
  </component>
{code}
{note}
The kernel will use this initParam to set a new variable named "portal.container.realm": This is a protected variable name and thus it should not be used in configuration.propeties but only in configuration files scoped to a portal container (such as "jar:/conf/portal/configuration.xml", "war:/conf/configuration.xml...) to refer to the name of the realm of the current portal container
{note}

The configuration of a repository is defined in an XML file. In this file is declared some repository parameters with the set of its workspaces.
Service configuration may be placed in in the PLF extension web application _platform-extension/WEB-INF/conf/platform/repository-configuration.xml_.
In this example of file we find this declaration:
{code:xml}
<repository-service default-repository="repository">
...
      <security-domain>${portal.container.realm}</security-domain>
...
</repository-service>
{note}
Example of Kernel variables usage:  http://community.jboss.org/wiki/Portalcontainers#How_to_avoid_duplicating_configuration_files_just_to_rename_a_simple_value_
{note}
{code}
h2. Main Portal & Rest Web applications:
In the Main Portal Web application ("portal.war" for PLF), you should declare in the web.xml file the realm name:
{code:xml}
	<login-config>
		<auth-method>FORM</auth-method> 
		<realm-name>gatein-domain</realm-name> 
		<form-login-config>
		...
		</form-login-config>
	</login-config>
{code}
And in the Rest Web application, as follow:
{code:xml}
	<login-config>
		<auth-method>BASIC</auth-method> 
		<realm-name>gatein-domain</realm-name> 		
	</login-config>
{code}